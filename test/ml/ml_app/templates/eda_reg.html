{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="../assets/img/favicon.png">
    <title>
        Fibré - EDA
    </title>
    <!--     Fonts and icons     -->
    <link rel="icon" type="image/x-icon" href='{% static "image/logo.png" %}'>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}" />
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.12.0/js/jquery.dataTables.min.js"></script>
    <script src="{% static 'js/bootstrap.bundle.min.js'%}"></script>

    <style>
        body {
            background-image: url('{% static "image/background.jpg" %}');
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
    </style>
</head>

<body class="g-sidenav-show  bg-gray-100">
    <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3"
        style="overflow: hidden !important;" id="sidenav-main">
        <div class="sidenav-header">
            <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none"
                aria-hidden="true" id="iconSidenav"></i>
            <a class="navbar-brand m-0" href=" https://demos.creative-tim.com/soft-ui-dashboard/pages/dashboard.html "
                target="_blank">
                <img src='{% static "image/logo.png" %}' class="navbar-brand-img h-100" alt="main_logo">
                <span class="ms-1 font-weight-bold inactive" style="font-size: 20px !important;">Fibré</span>
            </a>
        </div>
        <hr class="horizontal dark mt-0">
        <div class="collapse navbar-collapse  w-auto ">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'home_reg' %}">
                        <div
                            class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                            <span class="material-symbols-outlined">
                                home
                            </span>
                        </div>
                        <span class="nav-link-text ms-1 inactive">Home</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="{% url 'eda_reg' %}">
                        <div
                            class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                            <span class="material-symbols-outlined">
                                monitoring</span>
                        </div>
                        <span class="nav-link-text ms-1">EDA</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'add_data_reg' %}">
                        <div
                            class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                            <span class="material-symbols-outlined">
                                add
                            </span>
                        </div>
                        <span class="nav-link-text ms-1 inactive">Add Data</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link  " href="{% url 'train_reg' %}">
                        <div
                            class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                            <span class="material-symbols-outlined">
                                model_training</span>
                        </div>
                        <span class="nav-link-text ms-1 inactive">Train</span>
                    </a>
                </li>
                <li class="nav-item mt-3">
                    <h6 class="ps-4 ms-2 text-uppercase text-xs font-weight-bolder opacity-6 inactive">Account pages
                    </h6>
                </li>
                <li class="nav-item">
                    <a class="nav-link  " href="{% url 'home_class' %}">
                        <div
                            class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                            <svg width="12px" height="12px" viewBox="0 0 40 44" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                <span class="material-symbols-outlined">
                                    alt_route
                                </span>
                            </svg>
                        </div>
                        <span class="nav-link-text ms-1 inactive">Classification</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link  " href="{% url 'logout' %}">
                        <div
                            class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                            <svg width="12px" height="20px" viewBox="0 0 40 40" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                <span class="material-symbols-outlined">
                                    logout
                                </span>

                            </svg>
                        </div>
                        <span class="nav-link-text ms-1 inactive">Logout</span>
                    </a>
                </li>
            </ul>
        </div>

    </aside>
    <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
        <!-- Navbar -->
        <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl" id="navbarBlur"
            navbar-scroll="true">
            <div class="container-fluid py-1 px-3">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5">
                        <li class="breadcrumb-item text-sm"><a class="opacity-5" href="javascript:;">Regression</a>
                        </li>
                        <li class="breadcrumb-item text-sm active" aria-current="page">EDA</li>
                    </ol>
                    <h6 class="font-weight-bolder mb-0">Exploratory Data Analysis</h6>
                </nav>
                <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
                    <div class="ms-md-auto pe-md-3 d-flex align-items-center">
                    </div>
                    <ul class="navbar-nav  justify-content-end">
                        <li class="nav-item d-flex align-items-center">
                            <a href="javascript:;" class="nav-link text-body font-weight-bold px-0">
                                <i class="fa fa-user me-sm-1"></i>
                                <span class="d-sm-inline d-none">User Profile</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- End Navbar -->
        <div class="container-fluid py-4">
            <div class="row mt-4">
                <div class="col-lg-7" style="width: 100% !important;">
                    <div class="card z-index-2">
                        <div class="card-header pb-0">
                            <center>
                                <h4>Correlation Matrix</h4>
                            </center>
                        </div>
                        <div class="card-body p-3">
                            <div class="chart">
                                <center>
                                    {{ script_relations|safe }}
                                    {{ div_relations|safe }}
                                </center>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-4">
                <div class="col-lg-7-1">
                    <div class="card z-index-2">
                        <div class="card-header pb-0">
                            <center>
                                <h4>Density Plot</h4>
                            </center>
                        </div>
                        <div class="card-body p-3">
                            <div class="chart">
                                <center>
                                    {{ scripts_density|safe }}
                                    {{ divs_density|safe }}
                                </center>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row my-4">
                <div class="col-lg-8 col-md-6 mb-md-0 mb-4">
                    <div class="card">
                        <div class="card-header pb-0">
                            <div class="">
                                <div class="">
                                    <center>
                                        <h4>Garments Workers Productivity Dataset</h4>
                                    </center>
                                    <div class="eda-btns">
                                        <button class="btn-eda"
                                            onclick="window.location.href='{% url 'add_data_reg' %}'">Add Data</button>
                                        <button class="btn-eda"
                                            onclick="window.location.href='{% url 'export_reg' %}'">Export</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body px-0 pb-2" style="padding: 25px !important;">
                            <div class="table-responsive">
                                <div id="data-container"></div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

</body>

</html>

<script src="https://cdn.bokeh.org/bokeh/release/bokeh-3.3.1.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.3.1.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.3.1.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-api-3.3.1.min.js"></script>

<script>
    $(document).ready(function () {
        // Display the data in a table
        var tableHtml = '<table id="data-table" border="1">';
        tableHtml += '<thead><tr>';

        // Add column headers
        for (var colName of {{ data_head_json.columns|safe }}) {
            tableHtml += '<th>' + colName + '</th>';
        }

        tableHtml += '</tr></thead>';
        tableHtml += '<tbody>';

        // Add rows and data
        for (var row of {{ data_head_json.data|safe }}) {
            tableHtml += '<tr>';
            for (var cell of row) {
                tableHtml += '<td>' + cell + '</td>';
            }
            tableHtml += '</tr>';
        }

        tableHtml += '</tbody></table>';

        // Append the table to the data-container div
        $('#data-container').html(tableHtml);

        // Initialize DataTables
        $('#data-table').DataTable({
            "aLengthMenu": [[10, 25, 50-1], [10, 25, 50, "All"]],
            "iDisplayLength": 10
        });
    });
</script>

<script>
    const toggleButton = document.querySelector('.btn-toggle');
    const sidebar = document.querySelector('.sidebar'); // Assuming your sidebar has an ID of "sidebar"
    const main = document.querySelector(".main-dashboard");
    const main2 = document.querySelector(".tables");

    toggleButton.addEventListener('click', () => {
        const isExpanded = toggleButton.getAttribute('aria-expanded') === 'true';

        if (isExpanded) {
            toggleButton.setAttribute('aria-expanded', 'false');
            main.setAttribute('aria-expanded', 'false');
            main2.setAttribute('aria-expanded', 'false');
        } else {
            toggleButton.setAttribute('aria-expanded', 'true');
            main.setAttribute('aria-expanded', 'true');
            main2.setAttribute('aria-expanded', 'true');
        }

        sidebar.classList.toggle('collapsed');



    });
</script>